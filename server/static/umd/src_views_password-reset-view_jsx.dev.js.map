{"version":3,"file":"src_views_password-reset-view_jsx.dev.js","mappings":"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","sources":["webpack://tinode-webapp/./src/views/password-reset-view.jsx"],"sourcesContent":["// A password reset form.\nimport React from 'react';\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nimport PhoneEdit from '../widgets/phone-edit.jsx';\nimport VisiblePassword from '../widgets/visible-password.jsx';\n\nimport HashNavigation from '../lib/navigation.js';\n\nconst messages = defineMessages({\n  password_reset_email_sent: {\n    id: 'password_reset_email_sent',\n    defaultMessage: 'An email with security code has been sent.',\n    description: 'Notification that the email with password reset instructions has been sent'\n  },\n  password_reset_sms_sent: {\n    id: 'password_reset_sms_sent',\n    defaultMessage: 'A text message with security code has been sent.',\n    description: 'Notification that the SMS with password reset instructions has been sent'\n  }\n});\n\nclass PasswordResetView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tel: '',\n      email: '',\n      password: '',\n      sent: false,\n      haveCode: false,\n      code: ''\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleCodeChange = this.handleCodeChange.bind(this);\n    this.handleShowCodeField = this.handleShowCodeField.bind(this);\n\n    // Connection will trigger change by changing the this.props.serverVersion.\n    props.tinode.connect()\n      .catch(err => {\n        this.props.onError(err.message, 'err');\n      });\n  }\n\n  componentDidMount() {\n    const parsed = HashNavigation.parseUrlHash(window.location.hash);\n    const newState = {\n      token: parsed.params.token,\n      scheme: parsed.params.scheme,\n      code: parsed.params.code || ''\n    }\n\n    this.savedCred = parsed.params.cred;\n    if (this.props.reqCredMethod && parsed.params.cred) {\n      newState[this.props.reqCredMethod] = this.savedCred;\n    }\n    this.setState(newState);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.reqCredMethod != this.props.reqCredMethod && this.props.reqCredMethod) {\n      this.setState({[this.props.reqCredMethod]: this.savedCred || ''});\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    if (this.state.token) {\n      // Reset using token.\n      this.props.onReset(this.state.password.trim(), {\n        scheme: 'token',\n        secret: this.state.token\n      });\n    } else if (this.state.code && this.props.reqCredMethod) {\n      // Reset using security code.\n      // The secret is structured as <code>:<cred_method>:<cred_value>, \"123456:email:alice@example.com\".\n      const cred = this.props.reqCredMethod == 'email' ? this.state.email.trim() : this.state.tel.trim();\n      this.props.onReset(this.state.password.trim(), {\n        scheme: 'code',\n        secret: btoa(`${this.state.code}:${this.props.reqCredMethod}:${cred}`)\n      });\n    } else {\n      // Send email or SMS with the secret code.\n      const email = this.state.email.trim();\n      const tel = this.state.tel.trim();\n      this.setState({email: email, tel: tel});\n      this.props.onRequest(this.props.reqCredMethod, email || tel)\n        .then(_ => {\n          this.setState({sent: true});\n          const msg = this.props.reqCredMethod == 'email' ? messages.password_reset_email_sent :\n            this.props.reqCredMethod == 'tel' ? messages.password_reset_sms_sent : null;\n          if (msg) {\n            this.props.onError(this.props.intl.formatMessage(msg), 'info');\n          }\n        });\n    }\n  }\n\n  handleEmailChange(e) {\n    this.setState({email: e.target.value});\n  }\n\n  handlePasswordChange(e) {\n    this.setState({password: e.target.value});\n  }\n\n  handleCodeChange(e) {\n    this.setState({code: e.target.value.replace(/[^\\d]/g, '')});\n  }\n\n  handleShowCodeField(e) {\n    e.preventDefault();\n    this.setState({haveCode: true});\n  }\n\n  render() {\n    const showCredentialInput = !((this.state.token || (this.state.code && this.props.reqCredMethod)) && this.state.scheme);\n    const showPasswordInput = !showCredentialInput || this.state.haveCode || this.state.sent;\n\n    const passwordInput = (<>\n        <label className=\"small gray\" htmlFor=\"new-password\">\n          <FormattedMessage id=\"label_new_password\"\n            defaultMessage=\"New password\"\n            description=\"Label for entering a new password\" />\n        </label>\n        <FormattedMessage id=\"new_password_placeholder\" defaultMessage=\"Enter new password\"\n          description=\"Placeholder for entering new password\">{\n          (placeholder) => <VisiblePassword\n            id=\"new-password\"\n            placeholder={placeholder}\n            autoComplete=\"new-password\"\n            value={this.state.password}\n            required={true} autoFocus={true}\n            onChange={this.handlePasswordChange} />\n        }</FormattedMessage>\n      </>);\n\n    const emailInput = (<>\n        {this.state.haveCode ?\n          null :\n          <label htmlFor=\"inputEmail\">\n            <FormattedMessage id=\"label_reset_password\"\n              defaultMessage=\"Send a password reset email\"\n              description=\"Label for password reset field\" />\n          </label>\n        }\n        <FormattedMessage id=\"credential_email_prompt\" defaultMessage=\"Your registration email\"\n          description=\"Placeholder for entering email\">{\n          (placeholder) => <input type=\"email\" id=\"inputEmail\"\n            placeholder={placeholder}\n            autoComplete=\"email\"\n            value={this.state.email}\n            onChange={this.handleEmailChange}\n            required autoFocus />\n        }</FormattedMessage>\n      </>);\n\n    const phoneInput = (<>\n        {this.state.haveCode ?\n          null :\n          <div><label>\n            <FormattedMessage id=\"label_reset_password_tel\"\n              defaultMessage=\"Send SMS to reset password\"\n              description=\"Label for password reset field by phone\" />\n          </label></div>\n        }\n        <div>\n          <label className=\"small gray\">\n            <FormattedMessage id=\"mobile_phone_number\" defaultMessage=\"Mobile phone number\"\n              description=\"Prompt for entering a mobile phone number\" />\n          </label>\n        </div>\n        <div className=\"panel-form-row\">\n          <PhoneEdit\n            autoFocus={true}\n            onShowCountrySelector={this.props.onShowCountrySelector}\n            onSubmit={number => this.setState({tel: number})} />\n        </div>\n      </>);\n\n    const codeInput = (<>\n        <div>\n          <label className=\"small gray\" htmlFor=\"enter-confirmation-code\">\n            <FormattedMessage id=\"enter_confirmation_code_prompt\"\n              defaultMessage=\"Confirmation code\"\n              description=\"Request to enter confirmation code\" />\n          </label>\n        </div>\n        <div>\n          <FormattedMessage id=\"numeric_confirmation_code_prompt\"\n            defaultMessage=\"Numbers only\" description=\"Prompt for numeric conformation code\">{\n            (numbers_only) => <input type=\"text\" id=\"enter-confirmation-code\"\n              placeholder={numbers_only} maxLength={10}\n              value={this.state.code} onChange={this.handleCodeChange} required />\n          }</FormattedMessage>\n        </div>\n      </>);\n\n    const credentialInput = this.props.reqCredMethod == 'email' ?\n      emailInput : this.props.reqCredMethod == 'tel' ? phoneInput : null;\n\n    return (\n      <form id=\"password-reset-form\" onSubmit={this.handleSubmit}>\n        {!this.state.sent && showCredentialInput ? credentialInput : null}\n        {this.state.haveCode || this.state.sent ? codeInput : null}\n        {showPasswordInput ? passwordInput : null}\n        <div className=\"dialog-buttons\">\n          {this.state.haveCode || this.state.sent || this.state.token || this.state.code ? null :\n            <a href=\"#\" onClick={this.handleShowCodeField} style={{marginRight: 'auto'}}>\n              <FormattedMessage id=\"password_i_have_code\" defaultMessage=\"I have code\"\n                description=\"Call to open field to enter password reset code\" />\n            </a>\n          }\n          <button className=\"primary\" type=\"submit\">{\n            showPasswordInput ?\n              <FormattedMessage id=\"button_reset\" defaultMessage=\"Reset\" description=\"Button [Reset]\" />\n            :\n              <FormattedMessage id=\"button_send_request\" defaultMessage=\"Send request\"\n                description=\"Button [Send request]\" />\n          }</button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default injectIntl(PasswordResetView);\n"],"names":["React","FormattedMessage","defineMessages","injectIntl","PhoneEdit","VisiblePassword","HashNavigation","messages","password_reset_email_sent","id","defaultMessage","description","password_reset_sms_sent","PasswordResetView","PureComponent","constructor","props","state","tel","email","password","sent","haveCode","code","handleSubmit","bind","handleEmailChange","handlePasswordChange","handleCodeChange","handleShowCodeField","tinode","connect","catch","err","onError","message","componentDidMount","parsed","parseUrlHash","window","location","hash","newState","token","params","scheme","savedCred","cred","reqCredMethod","setState","componentDidUpdate","prevProps","prevState","e","preventDefault","onReset","trim","secret","btoa","onRequest","then","_","msg","intl","formatMessage","target","value","replace","render","showCredentialInput","showPasswordInput","passwordInput","createElement","Fragment","className","htmlFor","placeholder","autoComplete","required","autoFocus","onChange","emailInput","type","phoneInput","onShowCountrySelector","onSubmit","number","codeInput","numbers_only","maxLength","credentialInput","href","onClick","style","marginRight"],"sourceRoot":""}